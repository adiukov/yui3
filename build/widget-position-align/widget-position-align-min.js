YUI.add("widget-position-align",function(t,e){var i=t.Lang,n="align",s="visible",a="offsetWidth",o="offsetHeight";function g(t){}g.ATTRS={align:{value:null},centered:{setter:"_setAlignCenter",lazyAdd:!1,value:!1},alignOn:{value:[],validator:t.Lang.isArray}},g.TL="tl",g.TR="tr",g.BL="bl",g.BR="br",g.TC="tc",g.RC="rc",g.BC="bc",g.LC="lc",g.CC="cc",g.prototype={initializer:function(){this._posNode||t.error("WidgetPosition needs to be added to the Widget, before WidgetPositionAlign is added"),t.after(this._bindUIPosAlign,this,"bindUI"),t.after(this._syncUIPosAlign,this,"syncUI")},_posAlignUIHandles:null,destructor:function(){this._detachPosAlignUIHandles()},_bindUIPosAlign:function(){this.after("alignChange",this._afterAlignChange),this.after("alignOnChange",this._afterAlignOnChange),this.after("visibleChange",this._syncUIPosAlign)},_syncUIPosAlign:function(){var t=this.get(n);this._uiSetVisiblePosAlign(this.get(s)),t&&this._uiSetAlign(t.node,t.points)},align:function(t,e){return arguments.length?this.set(n,{node:t,points:e}):this._syncUIPosAlign(),this},centered:function(t){return this.align(t,[g.CC,g.CC])},_getAlignToXY:function(t,e,i,n){var s;switch(e){case g.TL:s=[i,n];break;case g.TR:s=[i-t.get(a),n];break;case g.BL:s=[i,n-t.get(o)];break;case g.BR:s=[i-t.get(a),n-t.get(o)];break;case g.TC:s=[i-t.get(a)/2,n];break;case g.BC:s=[i-t.get(a)/2,n-t.get(o)];break;case g.LC:s=[i,n-t.get(o)/2];break;case g.RC:s=[i-t.get(a),n-t.get(o)/2];break;case g.CC:s=[i-t.get(a)/2,n-t.get(o)/2]}return s},_getAlignedXY:function(e,n){if(i.isArray(n)&&2===n.length){var s,a=this._getRegion(e);if(a){switch(n[1]){case g.TL:s=[a.left,a.top];break;case g.TR:s=[a.right,a.top];break;case g.BL:s=[a.left,a.bottom];break;case g.BR:s=[a.right,a.bottom];break;case g.TC:s=[a.left+Math.floor(a.width/2),a.top];break;case g.BC:s=[a.left+Math.floor(a.width/2),a.bottom];break;case g.LC:s=[a.left,a.top+Math.floor(a.height/2)];break;case g.RC:s=[a.right,a.top+Math.floor(a.height/2)];break;case g.CC:s=[a.left+Math.floor(a.width/2),a.top+Math.floor(a.height/2)]}return this._getAlignToXY(this._posNode,n[0],s[0],s[1])}}else t.error("align: Invalid Points Arguments")},_setAlignCenter:function(t){return t&&this.set(n,{node:!0===t?null:t,points:[g.CC,g.CC]}),t},_uiSetAlign:function(t,e){var i=this._getAlignedXY(t,e);i&&this._doAlign(i)},_uiSetVisiblePosAlign:function(t){t?this._attachPosAlignUIHandles():this._detachPosAlignUIHandles()},_attachPosAlignUIHandles:function(){if(!this._posAlignUIHandles){var e=this.get("boundingBox"),i=t.bind(this._syncUIPosAlign,this),n=[];t.Array.each(this.get("alignOn"),function(s){var a=s.eventName,o=t.one(s.node)||e;a&&n.push(o.on(a,i))}),this._posAlignUIHandles=n}},_detachPosAlignUIHandles:function(){var e=this._posAlignUIHandles;e&&(new t.EventHandle(e).detach(),this._posAlignUIHandles=null)},_doAlign:function(t){t&&this.move(t)},_getRegion:function(e){var i;return e?(e=t.Node.one(e))&&(i=e.get("region")):i=this._posNode.get("viewportRegion"),i},_afterAlignChange:function(t){var e=t.newVal;e&&this._uiSetAlign(e.node,e.points)},_afterAlignOnChange:function(t){this._detachPosAlignUIHandles(),this.get(s)&&this._attachPosAlignUIHandles()}},t.WidgetPositionAlign=g},"@VERSION@",{requires:["widget-position"]});